@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: light;
  /* iOS safe area insets */
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
}

/* Prevent horizontal scroll on mobile */
html, body {
  overflow-x: hidden;
  width: 100%;
}

body {
  @apply bg-slate-50 text-ink font-body;
  background-image: radial-gradient(circle at 10% 10%, rgba(31, 142, 163, 0.18), transparent 45%),
    radial-gradient(circle at 90% 20%, rgba(242, 103, 46, 0.18), transparent 40%),
    linear-gradient(135deg, rgba(15, 26, 36, 0.04), rgba(15, 26, 36, 0));
  min-height: 100vh;
  min-height: 100dvh; /* Dynamic viewport height for mobile browsers */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  /* Respect safe areas on iOS */
  padding-left: var(--safe-area-inset-left);
  padding-right: var(--safe-area-inset-right);
}

/* Improve touch targets on mobile */
@media (max-width: 768px) {
  input, select, textarea, button {
    font-size: 16px !important; /* Prevent iOS zoom on focus */
  }
}

/* Better scrolling on iOS */
.overflow-x-auto, .overflow-y-auto {
  -webkit-overflow-scrolling: touch;
}

.glass-panel {
  @apply bg-white/80 backdrop-blur border border-white/60;
}

.watermark {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  pointer-events: none;
}

.watermark span {
  transform: rotate(-18deg);
  font-family: var(--font-display);
  font-weight: 700;
  letter-spacing: 0.24em;
  color: rgba(15, 26, 36, 0.16);
  font-size: clamp(1.4rem, 2.4vw, 2.6rem);
  text-transform: uppercase;
}

.badge {
  @apply inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold tracking-wide;
}

/* ───────── Print / PDF Styles ───────── */
@media print {
  @page {
    size: A4;
    margin: 12mm 14mm;
  }

  /* Reset the page */
  html, body {
    background: white !important;
    background-image: none !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
    padding: 0 !important;
    margin: 0 !important;
    font-size: 11pt !important;
    line-height: 1.5 !important;
    width: 100% !important;
    overflow: visible !important;
  }

  /* Hide all UI chrome */
  .print-hide,
  .print\:hidden,
  header,
  aside,
  .watermark,
  .fixed {
    display: none !important;
  }

  /* Force-show elements in print even if hidden at sm breakpoint */
  .print-show {
    display: block !important;
  }

  /* Make the print area fill the page cleanly */
  .print-area {
    border: none !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    padding: 0 !important;
    margin: 0 !important;
    max-width: 100% !important;
    width: 100% !important;
    overflow: visible !important;
    background: white !important;
  }

  /* Ensure the main layout doesn't add padding/grid */
  main {
    display: block !important;
    padding: 0 !important;
    margin: 0 !important;
    max-width: 100% !important;
  }

  /* Reset outer container */
  .print\:pb-0 { padding-bottom: 0 !important; }
  .print\:min-h-0 { min-height: 0 !important; }

  /* ── Typography: crisp, high-contrast ── */
  * {
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: subpixel-antialiased !important;
  }

  p, span, td, th {
    color: #1a1a1a !important;
  }

  /* Preserve intentionally-colored elements */
  .text-slate-400, .text-slate-500 {
    color: #64748b !important;
  }

  .text-white {
    color: #fff !important;
  }

  .font-semibold, .font-bold {
    color: #0f1a24 !important;
  }

  .text-ink {
    color: #0f1a24 !important;
  }

  /* ── Table: crisp borders and proper sizing ── */
  table {
    width: 100% !important;
    border-collapse: collapse !important;
    page-break-inside: avoid !important;
    font-size: 10pt !important;
  }

  th {
    padding: 8pt 10pt !important;
    font-size: 8pt !important;
    letter-spacing: 0.08em !important;
  }

  td {
    padding: 7pt 10pt !important;
  }

  /* Ensure table header accent colour prints */
  thead tr {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* ── Balance Due bar: force background colour ── */
  .print-area [style*="backgroundColor"] {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* Prevent page breaks inside important blocks */
  .print-area > div {
    page-break-inside: avoid;
  }

  /* Links should not show URL */
  a[href]::after {
    content: none !important;
  }

  /* Disable all animations */
  *, *::before, *::after {
    animation: none !important;
    transition: none !important;
  }

  /* Image handling */
  img {
    max-width: 100% !important;
    page-break-inside: avoid;
    image-rendering: -webkit-optimize-contrast;
  }
}
